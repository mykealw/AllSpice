import{r as J,c as f,a as k,o as u,b as p,d as s,e as T,F,f as X,g as ee,h as te,i as oe,S as D,j as se,t as w,k as S,p as L,l as N,m as V,n as O,M as q,q as U,s as j,u as re,w as B,v as A,x as z,y as h,z as y,A as ae}from"./vendor.c32e8bf1.js";const ie=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))t(i);new MutationObserver(i=>{for(const c of i)if(c.type==="childList")for(const l of c.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&t(l)}).observe(document,{childList:!0,subtree:!0});function o(i){const c={};return i.integrity&&(c.integrity=i.integrity),i.referrerpolicy&&(c.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?c.credentials="include":i.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function t(i){if(i.ep)return;i.ep=!0;const c=o(i);fetch(i.href,c)}};ie();const r=J({user:{},account:{},activeRecipe:null,recipes:[],myRecipes:[],ingredients:[],steps:[],favorites:[],myFavorites:[]});var x=(a,e)=>{for(const[o,t]of e)a[o]=t;return a};const ne={name:"App",setup(){return{appState:f(()=>r)}}},ce={class:"bg"},le=s("footer",null,null,-1);function de(a,e,o,t,i,c){const l=k("router-view"),_=k("RecipeForm"),R=k("RecipeDetails");return u(),p(F,null,[s("main",ce,[T(l)]),le,T(_),T(R)],64)}var ue=x(ne,[["render",de]]);const H=window.location.origin.includes("localhost"),K=H?"https://localhost:5001":"",pe="dev-arc8ixw5.us.auth0.com",me="b4Q9Wty6eIsyWlwRQmjMiaeAbgLKxz1Z",_e="https://MykealDev.com",ge="modulepreload",W={},ve="/",P=function(e,o){return!o||o.length===0?e():Promise.all(o.map(t=>{if(t=`${ve}${t}`,t in W)return;W[t]=!0;const i=t.endsWith(".css"),c=i?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${t}"]${c}`))return;const l=document.createElement("link");if(l.rel=i?"stylesheet":ge,i||(l.as="script",l.crossOrigin=""),l.href=t,document.head.appendChild(l),i)return new Promise((_,R)=>{l.addEventListener("load",_),l.addEventListener("error",R)})})).then(()=>e())};function fe(a){switch(a){case"./pages/AboutPage.vue":return P(()=>import("./AboutPage.99cefef9.js"),["assets/AboutPage.99cefef9.js","assets/vendor.c32e8bf1.js"]);case"./pages/AccountPage.vue":return P(()=>import("./AccountPage.458ad2c1.js"),["assets/AccountPage.458ad2c1.js","assets/AccountPage.1d38451d.css","assets/vendor.c32e8bf1.js"]);case"./pages/HomePage.vue":return P(()=>import("./HomePage.8765a189.js"),["assets/HomePage.8765a189.js","assets/HomePage.31176206.css","assets/vendor.c32e8bf1.js"]);default:return new Promise(function(e,o){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(o.bind(null,new Error("Unknown variable dynamic import: "+a)))})}}function M(a){return()=>fe(`./pages/${a}.vue`)}const he=[{path:"/",name:"Home",component:M("HomePage")},{path:"/about",name:"About",component:M("AboutPage")},{path:"/account",name:"Account",component:M("AccountPage"),beforeEnter:te}],Y=X({linkActiveClass:"router-link-active",linkExactActiveClass:"router-link-exact-active",history:ee(),routes:he});function C(a,e){if(H)console[a](`[${a}] :: ${new Date().toLocaleTimeString()} :: `,...e);else{switch(a){case"log":case"assert":return}console[a](`[${a}] :: ${new Date().toLocaleTimeString()} :: `,...e)}}const n={log(){C("log",arguments)},error(){C("error",arguments)},warn(){C("warn",arguments)},assert(){C("assert",arguments)},trace(){C("trace",arguments)}},m=oe.create({baseURL:K,timeout:8e3});class ye{async getAccount(){try{const e=await m.get("/account");r.account=e.data}catch(e){n.error("HAVE YOU STARTED YOUR SERVER YET???",e)}}async getMyFavs(){const e=await m.get("/account/Favorites");n.log(e.data,"favorites"),r.favorites=e.data,r.myFavorites=r.favorites.filter(o=>o.accountId==r.user.accountId),n.log(r.myFavorites,"my favs")}}const $=new ye;class be{async getAll(){const e=await m.get("api/recipes");n.log(e.data,"all recipes"),r.recipes=e.data}async getMyRecipes(){await this.getAll(),r.myRecipes=r.recipes.filter(e=>e.creatorId==r.account.id),r.recipes=r.myRecipes,n.log(r.recipes,"my recipes")}async getMyFavs(){await this.getAll(),await $.getMyFavs();let e=[];for(let o=0;o<r.myFavorites.length;o++){const t=r.myFavorites[o];for(let i=0;i<r.recipes.length;i++){const c=r.recipes[i];t.id==c.id&&e.unshift(c)}}r.recipes=e}async getActiveRecipe(e){const o=await m.get("api/recipes/"+e);n.log(o.data,"active recipe"),r.activeRecipe=o.data}async createRecipe(e){const o=await m.post("api/recipes",e);r.recipes=r.recipes.unshift(o.data),r.myRecipes=r.myRecipes.push(o.data),$.getMyFavs()}async deleteRecipe(e){const o=await m.delete("api/recipes/"+e);n.log(o.data,"deleted"),r.recipes=r.recipes.filter(t=>t.id!=e),r.myRecipes=r.myRecipes.filter(t=>t.id!=e)}async createFavorite(e){const o=await m.post("api/favorites",e);r.favorites=r.favorites.unshift(o.data),r.myFavorites=r.myFavorites.unshift(o.data)}async deleteFavorite(e){let o=null;o=r.myFavorites.find(t=>t.id==e),await m.delete("api/favorites/"+o.favoriteId),r.favorites=r.favorites.filter(t=>t.id!=o.id),r.myFavorites=r.myFavorites.filter(t=>t.id!=o.id)}}const E=new be;class g{static async confirm(e="Are you sure?",o="You won't be able to revert this!",t="warning",i="Yes, delete it!"){try{return!!(await D.fire({title:e,text:o,icon:t,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:i})).isConfirmed}catch{return!1}}static toast(e="Warning!",o="warning",t="top-end",i=3e3,c=!0){D.fire({title:e,icon:o,position:t,timer:i,timerProgressBar:c,toast:!0,showConfirmButton:!1})}static error(e){var o;if(e.isAxiosError){const{response:t}=e;this.toast(((o=t.data.error)==null?void 0:o.message)||t.data.message,"error")}else this.toast(e.message||e,"error")}static success(e="Success!"){this.toast(e,"success")}}const we={connection:"connection",connected:"connected",disconnect:"disconnect",authenticate:"authenticate",authenticated:"authenticated",userConnected:"userConnected",userDisconnected:"userDisconnected",error:"error"};class xe{constructor(e=!1,o=K){}on(e,o){var t;return(t=this.socket)==null||t.on(e,o.bind(this)),this}onConnected(e){n.log("[SOCKET_CONNECTION]",e),this.connected=!0,this.playback()}onAuthenticated(e){n.log("[SOCKET_AUTHENTICATED]",e),this.authenticated=!0,this.playback()}authenticate(e){var o;(o=this.socket)==null||o.emit(we.authenticate,e)}onError(e){n.error("[SOCKET_ERROR]",e)}enqueue(e,o){n.log("[ENQUEING_ACTION]",{action:e,payload:o}),this.queue.push({action:e,payload:o})}playback(){n.log("[SOCKET_PLAYBACK]");const e=[...this.queue];this.queue=[],e.forEach(o=>{this.emit(o.action,o.payload)})}emit(e,o=void 0){if(this.requiresAuth&&!this.authenticated)return this.enqueue(e,o);if(!this.connected)return this.enqueue(e,o);this.socket.emit(e,o)}}class Re extends xe{constructor(){super();this.on("error",this.onError)}onError(e){g.toast(e.message,"error")}}const Q=new Re,v=se({domain:pe,clientId:me,audience:_e,useRefreshTokens:!0,onRedirectCallback:a=>{Y.push(a&&a.targetUrl?a.targetUrl:window.location.pathname)}});v.on(v.AUTH_EVENTS.AUTHENTICATED,async function(){m.defaults.headers.authorization=v.bearer,m.interceptors.request.use(ke),r.user=v.user,await $.getAccount(),Q.authenticate(v.bearer),$.getMyFavs()});async function ke(a){if(!v.isAuthenticated)return a;const e=v.identity.exp*1e3,o=e<Date.now(),t=e<Date.now()+1e3*60*60*12;return o?await v.loginWithPopup():t&&(await v.getTokenSilently(),m.defaults.headers.authorization=v.bearer,Q.authenticate(v.bearer)),a}const Se={setup(){return{user:f(()=>r.user),account:f(()=>r.account),async login(){v.loginWithPopup()},async logout(){v.logout({returnTo:window.location.origin})}}}},Ae=a=>(L("data-v-6799271a"),a=a(),N(),a),Ie={class:"navbar-text"},Ce={key:1,class:"dropdown my-2 my-lg-0"},Ee={class:"dropdown-toggle selectable","data-bs-toggle":"dropdown","aria-expanded":"false",id:"authDropdown"},Te={key:0,class:""},$e=["src"],Fe={class:"mx-2 text-dark textfont"},Oe={class:"dropdown-menu p-0 list-group w-100","aria-labelledby":"authDropdown"},qe=Ae(()=>s("i",{class:"mdi mdi-logout"},null,-1)),Pe=V(" logout "),Me=[qe,Pe];function De(a,e,o,t,i,c){return u(),p("span",Ie,[t.user.isAuthenticated?(u(),p("div",Ce,[s("div",Ee,[t.account.picture?(u(),p("div",Te,[s("img",{src:t.account.picture,alt:"account photo",height:"40",class:"rounded"},null,8,$e),s("span",Fe,w(t.account.name),1)])):S("",!0)]),s("div",Oe,[s("div",{class:"list-group-item list-group-item-action hoverable text-danger",onClick:e[1]||(e[1]=(...l)=>t.logout&&t.logout(...l))},Me)])])):(u(),p("button",{key:0,class:"btn action text-dark text-uppercase my-1 my-lg-0 textfont",onClick:e[0]||(e[0]=(...l)=>t.login&&t.login(...l))}," Login "))])}var Le=x(Se,[["render",De],["__scopeId","data-v-6799271a"]]),Ne=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Le});const Ve={setup(){return{}}},Ue={class:"modal fade",tabindex:"-1",role:"dialog","aria-labelledby":"modelTitleId","aria-hidden":"true",id:"form-modal"},je={class:"modal-dialog modal-xl",role:"document"},Be={class:"modal-content bg-transparent text-light"},ze={class:"modal-header bg"},He={class:"modal-title text-light"},Ke=s("button",{type:"button",class:"btn-close bg-light","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),We={class:"modal-body bg-light"},Ye={class:""};function Qe(a,e,o,t,i,c){return u(),p("div",Ue,[s("div",je,[s("div",Be,[s("div",ze,[s("h5",He,[O(a.$slots,"title")]),Ke]),s("div",We,[O(a.$slots,"modal-body")]),s("div",Ye,[O(a.$slots,"footer")])])])])}var Ge=x(Ve,[["render",Qe]]),Ze=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Ge});const Je={setup(){return{}}},Xe={class:"d-flex flex-row-reverse px-1"};function et(a,e,o,t,i,c){const l=k("Login");return u(),p("nav",Xe,[T(l)])}var tt=x(Je,[["render",et],["__scopeId","data-v-c4a5c03c"]]),ot=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:tt});class st{async getSteps(e){const o=await m.get("api/recipes/"+e+"/steps");n.log(o.data,"steps got"),r.steps=o.data,r.steps.sort((t,i)=>t.position>i.position)}async addSteps(e,o){o.recipeId=e,n.log(o,"body");const t=await m.post("api/steps/",o);n.log(t.data,"added step"),r.steps.unshift(t.data),r.steps.sort((i,c)=>i.position<c.position)}async removeSteps(e){const o=await m.delete("api/steps/"+e);n.log(o.data,"removed step"),r.steps=r.steps.filter(t=>t.id!=e)}async getIngredients(e){const o=await m.get("api/recipes/"+e+"/ingredients");n.log(o.data,"ingredients got"),r.ingredients=o.data}async addIngredients(e,o){o.recipeId=e,n.log(o,"body");const t=await m.post("api/ingredients/",o);n.log(t.data,"added ingredients"),r.ingredients.unshift(t.data)}async removeIngredients(e){const o=await m.delete("api/ingredients/"+e);n.log(o.data,"deleted ingredients"),r.ingredients=r.ingredients.filter(t=>t.id!=e)}}const I=new st;const rt={props:{recipe:{type:Object,required:!0}},setup(a){return{props:a,stonks:f(()=>r.myFavorites.find(e=>e.id==a.recipe.id)),activeRecipe:f(()=>r.activeRecipe),async deleteFavorite(e){try{await E.deleteFavorite(e)}catch(o){n.log(o),g.toast(o.message,"error")}},async createFavorite(e){try{let o={accountId:r.user.id,recipeId:e};await E.createFavorite(o)}catch(o){n.log(o),g.toast(o.message,"error")}},async getSteps(e){try{r.activeRecipe=a.recipe,await I.getSteps(e),await I.getIngredients(e),q.getOrCreateInstance(document.getElementById("recipe-modal")).show()}catch(o){n.log(o),g.toast(o.message,"error")}}}}},at={class:"Recipe my-2 position-relative p-0 mx-0"},it=["src"],nt={class:"p-0"};function ct(a,e,o,t,i,c){return u(),p("div",at,[s("img",{class:"rp p-0 m-0",src:o.recipe.picture,alt:""},null,8,it),s("div",nt,[t.stonks?(u(),p("i",{key:0,onClick:e[0]||(e[0]=l=>t.deleteFavorite(o.recipe.id)),class:"mdi mdi-heart mdi-36px position-absolute rc1 rc2 action text-danger"})):S("",!0),t.stonks?S("",!0):(u(),p("i",{key:1,onClick:e[1]||(e[1]=l=>t.createFavorite(o.recipe.id)),class:"mdi mdi-heart-outline mdi-36px position-absolute action rc1 rc2"})),s("button",{class:"btn btn-dark text-light textfont rd1 rd2 action",onClick:e[2]||(e[2]=l=>t.getSteps(o.recipe.id))}," Details ")])])}var lt=x(rt,[["render",ct],["__scopeId","data-v-82cec58a"]]),dt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:lt});const ut={props:{id:{type:Number,required:!0}},setup(a){const e=U({recipeId:a.id});return{editable:e,account:f(()=>r.account),activeRecipe:f(()=>r.activeRecipe),steps:f(()=>r.steps),ingredients:f(()=>r.ingredients),async addStep(o){try{await I.addSteps(o,e.value)}catch(t){n.log(t),g.toast(t.message,"error")}},async addIngredients(o){try{await I.addIngredients(o,e.value)}catch(t){n.log(t),g.toast(t.message,"error")}},async removeStep(o){try{await g.confirm()&&await I.removeSteps(o)}catch(t){n.log(t),g.toast(t.message,"error")}},async removeIngredient(o){try{await g.confirm()&&(n.log(o),await I.removeIngredients(o))}catch(t){n.log(t),g.toast(t.message,"error")}},async deleteReciepe(o){try{await g.confirm()&&(await E.deleteRecipe(o),q.getOrCreateInstance(document.getElementById("recipe-modal")).hide())}catch(t){n.log(t),g.toast(t.message,"error")}}}}},b=a=>(L("data-v-264eafb9"),a=a(),N(),a),pt={class:"row bg-light"},mt={class:"col-md-4"},_t=["src"],gt={class:"col-md-8"},vt={class:"row"},ft={class:"col-md-12"},ht={class:"text-dark textfont"},yt={class:"text-dark textfont"},bt={class:"col-md-6 text-dark"},wt=b(()=>s("div",{class:"bgcolor text-light rounded-top"},[s("h6",{class:"text-center m-0 text-dark textfont"},"Recipe Steps")],-1)),xt=["onClick"],Rt={key:0},kt=b(()=>s("label",{for:"step body",class:"form-label"},null,-1)),St=b(()=>s("label",{for:"step position"},null,-1)),At=b(()=>s("button",{type:"submit",class:"btn greenb my-1"},"+",-1)),It={class:"col-md-6 text-dark"},Ct=b(()=>s("div",{class:"bgcolor text-light rounded-top"},[s("h6",{class:"text-center m-0 text-dark textfont"},"Ingredients")],-1)),Et=["onClick"],Tt={key:0},$t=b(()=>s("label",{for:" ingredient add name",class:"form-label"},null,-1)),Ft=b(()=>s("label",{for:" ingredient quantity",class:"form-label"},null,-1)),Ot=b(()=>s("button",{type:"submit",class:"btn greenb my-1"},"+",-1));function qt(a,e,o,t,i,c){const l=k("Modal");return u(),j(l,{id:"recipe-modal"},re({_:2},[t.activeRecipe?{name:"modal-body",fn:B(()=>{var _,R;return[s("div",pt,[s("div",mt,[s("img",{class:"img-fluid rounded shadow",src:(_=t.activeRecipe)==null?void 0:_.picture,alt:""},null,8,_t)]),s("div",gt,[s("div",vt,[s("div",ft,[s("h5",ht,[V(w((R=t.activeRecipe)==null?void 0:R.title)+" ",1),t.activeRecipe.creatorId==t.account.id?(u(),p("i",{key:0,class:"mdi mdi-delete action",onClick:e[0]||(e[0]=A(d=>t.deleteReciepe(t.activeRecipe.id),["stop"]))})):S("",!0)]),s("p",yt,w(t.activeRecipe.subtitle),1)]),s("div",bt,[wt,s("div",null,[(u(!0),p(F,null,z(t.steps,d=>(u(),p("h6",{key:d.id,class:"action",onClick:A(Z=>t.removeStep(d.id),["stop"])},w(d.position)+" "+w(d.body),9,xt))),128))]),t.activeRecipe.creatorId==t.account.id?(u(),p("div",Rt,[s("form",{onSubmit:e[3]||(e[3]=A(d=>t.addStep(t.activeRecipe.id),["prevent"]))},[kt,h(s("input",{type:"text",required:"","onUpdate:modelValue":e[1]||(e[1]=d=>t.editable.body=d),class:"form-control","aria-describedby":"add step body",placeholder:"Add step..."},null,512),[[y,t.editable.body]]),St,h(s("input",{type:"number",required:"",placeholder:"step position #","onUpdate:modelValue":e[2]||(e[2]=d=>t.editable.position=d),class:"form-control","aria-describedby":"add step positn"},null,512),[[y,t.editable.position]]),At],32)])):S("",!0)]),s("div",It,[Ct,s("div",null,[(u(!0),p(F,null,z(t.ingredients,d=>(u(),p("h6",{key:d.id,class:"action",onClick:A(Z=>t.removeIngredient(d.id),["stop"])},w(d.name)+" "+w(d.quantity),9,Et))),128))]),t.activeRecipe.creatorId==t.account.id?(u(),p("div",Tt,[s("form",{onSubmit:e[6]||(e[6]=A(d=>t.addIngredients(t.activeRecipe.id),["prevent"]))},[$t,h(s("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=d=>t.editable.name=d),required:"",class:"form-control","aria-describedby":"ingredient name add",placeholder:"Name of Ingredient..."},null,512),[[y,t.editable.name]]),Ft,h(s("input",{type:"text",required:"","onUpdate:modelValue":e[5]||(e[5]=d=>t.editable.quantity=d),class:"form-control","aria-describedby":"add quantity input",placeholder:"Add Quantity..."},null,512),[[y,t.editable.quantity]]),Ot],32)])):S("",!0)])])])])]})}:void 0]),1024)}var Pt=x(ut,[["render",qt],["__scopeId","data-v-264eafb9"]]),Mt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Pt});const Dt={setup(){const a=U({});return{editable:a,async createRecipe(){try{await E.createRecipe(a.value),q.getOrCreateInstance(document.getElementById("create-recipe")).hide(),await E.getAll()}catch(e){n.log(e),g.toast(e.message,"error")}}}}},Lt={class:"col-md-12"},Nt=s("label",{for:"",class:"form-label text-dark textfont"}," Title ",-1),Vt={class:"col-md-12"},Ut=s("label",{for:"",class:"form-label text-dark textfont"}," Category ",-1),jt={class:"col-md-12"},Bt=s("label",{for:"",class:"form-label text-dark textfont"}," Subtitle ",-1),zt={class:"col-md-12"},Ht=s("label",{for:"",class:"form-label text-dark textfont"}," Add Picture ",-1),Kt=s("button",{class:"btn greenb rounded text-dark mt-3",type:"submit"}," Create Recipe ",-1);function Wt(a,e,o,t,i,c){const l=k("Modal");return u(),j(l,{id:"create-recipe"},{"modal-body":B(()=>[s("div",null,[s("form",{class:"",onSubmit:e[4]||(e[4]=A((..._)=>t.createRecipe&&t.createRecipe(..._),["prevent"]))},[s("div",Lt,[Nt,h(s("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=_=>t.editable.title=_),class:"form-control","aria-describedby":"title here",required:"",placeholder:"Recipes Title here..."},null,512),[[y,t.editable.title]])]),s("div",Vt,[Ut,h(s("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=_=>t.editable.category=_),class:"form-control","aria-describedby":"category here",placeholder:"Recipes Category here...",required:""},null,512),[[y,t.editable.category]])]),s("div",jt,[Bt,h(s("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=_=>t.editable.subtitle=_),class:"form-control","aria-describedby":"subtitle here",placeholder:"Recipes Subtitle here...",required:""},null,512),[[y,t.editable.subtitle]])]),s("div",zt,[Ht,h(s("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=_=>t.editable.picture=_),class:"form-control","aria-describedby":"image link",placeholder:"Put Image link here...",required:""},null,512),[[y,t.editable.picture]])]),Kt],32)])]),_:1})}var Yt=x(Dt,[["render",Wt]]),Qt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Yt});function Gt(a){Object.entries({"./components/Login.vue":Ne,"./components/Modal.vue":Ze,"./components/Navbar.vue":ot,"./components/Recipe.vue":dt,"./components/RecipeDetails.vue":Mt,"./components/RecipeForm.vue":Qt}).forEach(([o,t])=>{const i=t.name||o.substr(o.lastIndexOf("/")+1).replace(/\.\w+$/,"");a.component(i,t.default)})}const G=ae(ue);Gt(G);G.use(Y).mount("#app");export{r as A,g as P,x as _,n as l,E as r};
